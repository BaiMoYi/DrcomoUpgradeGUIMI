以下是“物品升级界面”模块的**最终用户使用手册**初稿，面向最终玩家，无需任何技术背景，即可按步使用和配置。

---

## 1. 功能简介

本模块为 Minecraft 服务器插件中的“物品升级界面”功能，旨在帮助玩家将已获得的 MMOItems 自定义物品，一键升级为当前服务器上最新版本的同款物品。

* **解决痛点**：手动更换或丢弃过时物品繁琐，不易辨别版本，新旧物品混杂影响体验。
* **核心价值**：在安全可控的图形界面中，自动校验与替换，保留原物品叠加数量并防止非法物品误入。
* **典型场景**：

  * 当服务器更新了 MMOItems 配置后，玩家手中还留有旧版物品，需要统一换成最新版。
  * 想集中管理与升级所有指定类型的职业徽章、技能书、武器等。

---

## 2. 功能入口说明

玩家可通过以下方式打开升级界面：

* **游戏内指令**
  在聊天框输入：

  ```
  /<插件名> open
  ```

  按 **Enter** 发送后，即可看到名为“物品升级界面”的窗口弹出。

* **快捷键或 GUI 按钮**（如服务器可另行绑定）
  若服务器管理端在主界面添加快捷按钮，点击即可打开。

打开后，界面标题为“物品升级界面”，格子总数由服务器配置决定（示例为 27 格）。顶部和底部边框为装饰槽，中间空白为交互槽。

---

## 3. 操作流程详解

### Step 1 放入待升级物品

1. 在界面中，中间的空白格子即为可交互槽。
2. 只可将列表中白名单物品拖入这些槽（具体白名单见第 4 章）。
3. 若尝试将不在白名单中的物品或非 MMOItems 物品放入，界面会自动阻止并在右下角弹出红色提示：“该物品无法放入升级界面！”。

### Step 2 确认放入完成

* 可单次拖入多个相同物品，支持物品叠加。
* 放入后，空白格依旧保持可拖动状态，直至准备关闭。

### Step 3 关闭界面触发升级

1. 点击界面右侧**关闭按钮**（图标为“禁止”标识），或直接按 ESC 键关闭界面。
2. 系统自动对每个格子中的物品依次执行：

   * 检查其是否在白名单；
   * 是 → 用最新版本物品替换，保留数量；
   * 否 → 直接返还原物品；
3. 替换或返还发生时，若你的背包有空位，物品将放入背包；若背包已满，则掉落在你脚下，并弹出提示：“背包已满，物品掉落在地上。”
4. 全部处理完毕后，界面关闭流程完成，背包视图会自动刷新，无需手动操作。

---

## 4. 配置与个性化

> 以下内容适用于服务器管理员配置，无需普通玩家操作。若你是服务器管理者，请按需修改 `config.yml`。

### 4.1 配置文件位置

* 默认路径：`plugins/<插件名>/config.yml`
* 支持热重载：在服务器控制台执行 `/插件名 reload` 后立即生效。

### 4.2 主要字段说明

| 字段                          | 含义                           | 示例及可选值                 |
| --------------------------- | ---------------------------- | ---------------------- |
| `whitelist`                 | 可升级物品清单，格式为 `类型;;物品ID`       | `- "CLASS;;铸刃者情报"`     |
| `gui.title`                 | 界面窗口标题                       | `&8物品升级界面`             |
| `gui.size`                  | 界面格子总数，必须为 9 的倍数             | `27` 或 `36`            |
| `gui.decorative-slots`      | 装饰槽位及样式，防止玩家误放               | `"[0,1,2,3,5]"` 对应多个格子 |
| `gui.close-button-slot`     | 关闭按钮所在格子编号（0\~size-1）        | `22`                   |
| `gui.close-button.material` | 关闭按钮材质                       | `BARRIER`              |
| `gui.close-button.name`     | 关闭按钮显示名称                     | `&c关闭升级界面`             |
| `debug-level`               | 日志输出等级：`DEBUG`/`INFO`/`NONE` | `INFO`（默认）             |

### 4.3 配置示例（完整文件）

```yaml
whitelist:
  - "CLASS;;铸刃者情报"
  - "WEAPON;;神圣之剑"

gui:
  title: "&8物品升级界面"
  size: 27
  decorative-slots:
    "[0,1,2,3,5,6,7,8]":
      material: GRAY_STAINED_GLASS_PANE
      name: "&7"
      custom-model-data: 0
    "[18,26]":
      material: LIGHT_GRAY_STAINED_GLASS_PANE
      name: "&8边缘"
      lore:
        - "&7这只是个边框"
  close-button-slot: 22
  close-button:
    material: BARRIER
    name: "&c关闭升级界面"
    lore:
      - "&7点击关闭界面"

debug-level: INFO
```

---

## 5. 错误提示与异常处理

以下为玩家在使用过程中可能遇到的问题与对应提示，以及可行的解决建议。

| 场景            | 系统提示          | 建议操作                   |
| ------------- | ------------- | ---------------------- |
| 放入非法物品        | 该物品无法放入升级界面！  | 请确认物品是否在白名单中，如不确定联系管理员 |
| 升级失败（配置缺失或异常） | 升级失败，已返还原物品。  | 稍后重试或告知管理员检查白名单和配置     |
| 背包已满时自动掉落     | 背包已满，物品掉落在地上。 | 清理背包后重新进行升级            |
| 无法打开界面        | 无权限或命令错误      | 确认命令拼写正确并拥有相应权限        |
| 界面打开后延迟       | 无提示           | 可能网络或服务器繁忙，请稍后再试       |

---

## 6. 使用建议与最佳实践

* **批量升级**：建议一次性将所有待升级物品集中到一个箱子中，分多次拖入界面，减少重复打开/关闭操作。
* **分角色处理**：若拥有多个角色或多个职业物品，分别在对应角色下操作，可避免版本混淆。
* **管理员白名单管理**：根据更新频率动态调整 `whitelist`，移除已废弃物品，保持升级效率。
* **控制台监控**：若开启 `DEBUG` 等级，可在控制台查看升级日志，了解升级详情及异常。

---

## 7. 快速参考表

| 操作         | 输入/点击方式       | 说明                  |
| ---------- | ------------- | ------------------- |
| 打开升级界面     | `/插件名 open`   | 命令方式                |
| 放入物品       | 拖拽至可交互格       | 仅支持白名单物品            |
| 关闭界面（执行升级） | ESC 或 点击关闭按钮  | 自动完成升级并返还/替换物品      |
| 重载配置       | `/插件名 reload` | 更新 `config.yml` 后使用 |

---

## 8. FAQ 常见问题

**Q1：我放入的白名单物品为何未被升级？**
A：请先确认该物品的类型和 ID 是否与 `whitelist` 中完全一致（区分大小写），若不一致则不会匹配。

**Q2：升级后物品附魔或强化数据丢失？**
A：本功能仅替换物品本体外观与基础属性，若需要保留特殊附魔或强化，请联系管理员在服务器端做专门处理。

**Q3：我按热键将物品移入界面后被拒绝，怎么办？**
A：系统默认允许热键操作，但同样会校验白名单；若物品不在白名单中，热键也会被拦截。

**Q4：如何调整界面格子数量或样式？**
A：可修改 `config.yml` 中 `gui.size` 与 `decorative-slots`，保存后执行 `/插件名 reload` 即可生效。

---

至此，使用手册已包含功能概述、访问入口、操作流程、配置详解、异常处理、最佳实践、快速参考与 FAQ，覆盖所有玩家视角所需信息。若需补充示例截图或更多案例，请告知。
